$schema: http://json-schema.org/draft-07/schema#
title: liteci Plan
description: Execution plan DAG output specification
type: object
required:
  - apiVersion
  - kind
  - metadata
  - jobs
properties:
  apiVersion:
    type: string
    enum:
      - v1
  kind:
    type: string
    enum:
      - Workflow
  metadata:
    type: object
    required:
      - name
    properties:
      name:
        type: string
      description:
        type: string
      generatedBy:
        type: string
      version:
        type: string
      timestamp:
        type: string
  jobs:
    type: array
    items:
      type: object
      required:
        - id
        - name
        - component
        - environment
        - type
        - steps
      properties:
        id:
          type: string
          pattern: ^[a-z0-9-]+@[a-z0-9-]+\.[a-z0-9-]+$
        name:
          type: string
        component:
          type: string
        environment:
          type: string
        type:
          type: string
        provider:
          type: string
        capability:
          type: string
        steps:
          type: array
          items:
            type: object
            required:
              - name
              - run
            properties:
              name:
                type: string
              run:
                type: string
              timeout:
                type: string
              retry:
                type: integer
              onFailure:
                type: string
                enum:
                  - stop
                  - continue
        dependsOn:
          type: array
          items:
            type: string
        timeout:
          type: string
        retries:
          type: integer
        env:
          type: object
          additionalProperties: true
        labels:
          type: object
          additionalProperties:
            type: string
        config:
          type: object
          additionalProperties: true
